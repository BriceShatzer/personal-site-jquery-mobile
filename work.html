<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BriceShatzer.com | Work</title>
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Lato' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.css">
    <link rel="stylesheet" href="/utilities/fancybox/jquery.fancybox.css" />       
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script src="/utilities/lodash.min.js"></script>
    <script src="/utilities/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.min.js"></script>
</head>
<body>
    <div data-role="header">
        <div id="navigation">
            <a href="/development.html">Development</a> | <a href="/creative.html">Creative & Design</a> | <a href="#writing">Writing</a> | <a href="/tools.html">Tools</a> | <a href="#about">Me</a>
        </div>
        <div class="quickInfo_open-arrow"><span>Info</span></div>
    </div> 
    <div id="quickInfo" data-role="panel" data-position="left" data-display="push" data-dismissible="false" data-position-fixed="true">
        <div class="ui-body" itemscope itemtype="http://schema.org/person">
            <ul data-role="listview">
                <li id="title"><h1 style="" itemprop="name">Brice Shatzer</h1></li>
                <li id="resume"><a href="#" target="_blank"><span class="fa fa-fw fa-file-pdf-o"></span><span style="">View Resume<span></a></li>
                <li id="email"><span class="fa fa-fw fa-envelope" style=""></span> <span itemprop="email">Brice.Shatzer@gmail.com</span></li>
                <li id="cellphone" style=""><span class="fa fa-fw fa-mobile" style=""></span><a href="tel:+13192392470" itemprop="telephone">319-239-2470</a></span></li>
            <!--
                <li style="overflow:hidden;">
                    <span class="fa fa-graduation-cap" style="font-size:2.8em;"></span>
                    <div style="float:right;width:9em;text-align:center;">
                        Carthage College<br>
                        <span style="font-size:0.8em">B.A. Communication / Digital Media</span>
                    </div>
                </li>
            --> 
                <li style="" id="icons">
                    <a href="http://www.linkedin.com/pub/brice-shatzer/16/690/b26/" target="_blank"><span class="fa fa-linkedin" /></a>
                    <a href="https://twitter.com/_shatzer" target="_blank"><span class="fa fa-twitter" /></a>
                    <a href="https://github.com/briceshatzer" target="_blank"><span class="fa fa-github" /></a>
                </li>
            </ul>

            <br>

        </div>
        <div class="quickInfo_close-arrow" style=""><span>Close</span></div>
    </div><!-- end header -->


<section data-role="page" class="ui-responsive-panel">
    <div role="main" class="ui-content" id="portfolioContent" ></div><!-- /content -->

<script type="text/javascript">
var nacho;

var $container = $('#portfolioContent');

//var tech_list=[];
var portfolio_json;
var tech_json;



$( "body" ).on( "pagecontainerchange", function( event, ui ) {console.log("pagecontainerchange event from work.html");
    var portfolioLoad = new $.Deferred();
    var techLoad = new $.Deferred();
    var url = $.mobile.path.getLocation();
    var query; 
    if(/\?/.test(url)){ query = decodeURIComponent(url.slice( url.indexOf('?')+1 )  );
    }else{ query = false }

if( /work.html/.test($.mobile.path.getLocation()) ){
    if(!query){console.log('no query')}
    else{
    //--check for & load required data 
        if(!portfolio_json){ 
            $.getJSON('/portfolio_principal.json', function(data) { 
                portfolio_json = data;
              console.log('portfolio_json loaded via development.html' );            
                portfolioLoad.resolve();
            }) 
        }else{ portfolioLoad.resolve(); }

        if(!tech_json){
        $.getJSON('/tech.json', function(data) {
            tech_json = data;
            console.log('tech_json loaded via development.html' );
            techLoad.resolve();
        });
        }else{ techLoad.resolve() }        

        $.when.apply($, [techLoad,portfolioLoad] ).done(function(){
            //------------------------------------
            //pluck what's needed and build the page    

        /*
            //--create var tech_list
            _.forEach(tech_json, function(obj) { 
                if(obj.childItems){
                    _.forEach(obj.childItems, function(child) { tech_list.push(child) });
                }else{ tech_list.push(obj) } 
            }); 
        */

            var portfolioItem = _.find(portfolio_json, function(work){ return work.name.toLowerCase() == query.toLowerCase()  });
nacho = portfolioItem;
        /*
            var portfolioExamples = _.filter(portfolio_json, function(obj) { 
                var match;
                    $.each(obj.tech, function(){
                        if( this.toLowerCase() == query.toLowerCase() ){ match=true; } 
                    }) 
                return match === true;
            });
        */

            /*var $workspace = $('section[data-url="'+url.slice( url.lastIndexOf('/'))+'"]').find('#portfolioContent');
            console.log(query);*/
            var $workspace = $('section[data-url="/work.html?'+encodeURIComponent(query)+'"]').find('#portfolioContent');
            if( !$workspace.html() ){
                $content = $('<div id="workExample"></div>');

                $content.append('<h1 style="clear:both">'+portfolioItem.name+'</h1>'); 

                if(portfolioItem.notes){
                    $content.append('<div class="itemInfo"><p class="notes">'+portfolioItem.notes+'</p></div>'); }

                if(portfolioItem.tech){
                    $techUsed = $('<div class="ui-body ui-body-a ui-corner-all techUsed"><h3>Technology Used</h3><ul></ul></div>');
                    $.each(portfolioItem.tech, function() {
                        $('<li><a href="/development.html?'+encodeURIComponent(this)+'">'+this+'</li>').appendTo($techUsed.find('ul'));
                    });
                    $content.append($techUsed);
                
                }
                if(portfolioItem.media){
                    $.each(portfolioItem.media, function() {
                        $content.find('div.itemInfo').append('<a href="'+this+'" class="image"><img src="'+this+'" alt="" /></a>');
                    });
                }

                console.log($workspace);
                $workspace.append($content);
                if(portfolioItem.media){$('div.itemInfo a.image').fancybox();}
            }
            


            //------------------------------------
            })


        }

    }

});    
</script>
<script type="text/javascript" src="/utilities/fancybox/jquery.fancybox.pack.js"></script>
</section><!-- /page -->




</body>
<script type="text/javascript" src="/navigation.js"></script>
</html>
